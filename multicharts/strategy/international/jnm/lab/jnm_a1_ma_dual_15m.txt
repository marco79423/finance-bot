// JNM 15 min
// Backtest time: 2018/01/01 - 2024/01/01 Exchange
// Compliance: 1


inputs: Enabled(1), OrderSize(1);

if Enabled = 0 then
	#Return;


vars: SmallMALen(50), MidMALen(215), LongMALen(425), BreakoutLen(45);

vars: SmallMA(1), MidMA(1), LongMA(1);
SmallMA = Average(Close, SmallMALen);
MidMA = Average(Close, MidMALen);
LongMA = Average(Close, LongMALen);

vars: Bullish(True), Bearish(False);
Bullish = SmallMA > MidMA and MidMA > LongMA;
Bearish = SmallMA < MidMA and MidMA < LongMA;

vars: UpBreak(0), DownBreak(0);
UpBreak = Highest(Close, BreakoutLen);
DownBreak = Lowest(Close, BreakoutLen);

if Bullish then begin
	if Close = UpBreak then begin
		Buy ("LE") OrderSize contracts next bar market;
	end;
end;

if Bearish then begin
	if Close = DownBreak then begin
		SellShort ("SE") OrderSize contracts next bar market;
	end;
end;
